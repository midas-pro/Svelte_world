<div class="article-meta">
	<a href='/@{article.author.username}'>
		<img src={article.author.image} alt={article.author.username} />
	</a>

	<div class="info">
		<a href='/@{article.author.username}' class="author"> {article.author.username}</a>
		<span class="date">
			{new Date(article.createdAt).toDateString()}
		</span>
	</div>

	{#if canModify}
		<span>
			<a href='/editor/{article.slug}' class="btn btn-outline-secondary btn-sm">
				<i class="ion-edit"/> Edit Article
			</a>

			<button class="btn btn-outline-danger btn-sm" on:click='{remove}'>
				<i class="ion-trash-a"/> Delete Article
			</button>
		</span>
	{/if}
</div>

<script>
	import { goto } from '../../../__sapper__/client.js';
	import * as api from '../_api.js';

	let article, user;
	$: canModify = $user && article.author.username === $user.username


	function remove() {
		api.del(`/articles/${article.slug}`, user && user.token).then(response => {
			goto('/');
		});
	}
</script>